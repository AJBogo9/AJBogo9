<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradient for nodes -->
    <radialGradient id="nodeGradient1">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </radialGradient>
    <radialGradient id="nodeGradient2">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </radialGradient>
    <radialGradient id="nodeGradient3">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </radialGradient>
    
    <!-- Glow filter -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- CSS for theme switching -->
  <style>
    @media (prefers-color-scheme: light) {
      .bg { fill: #f8f9fa; }
      .connection { stroke: #495057 !important; }
      .particle { fill: #495057; }
    }
    @media (prefers-color-scheme: dark) {
      .bg { fill: #0f0f23; }
      .particle { fill: #fff; }
    }
  </style>
  
  <!-- Background -->
  <rect width="800" height="400" class="bg"/>
  
  <!-- Layer 1 (Input) - 4 nodes -->
  <g id="layer1">
    <circle cx="100" cy="80" r="12" fill="url(#nodeGradient1)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="100" cy="160" r="12" fill="url(#nodeGradient1)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" begin="0.3s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.3s" repeatCount="indefinite"/>
    </circle>
    <circle cx="100" cy="240" r="12" fill="url(#nodeGradient1)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" begin="0.6s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.6s" repeatCount="indefinite"/>
    </circle>
    <circle cx="100" cy="320" r="12" fill="url(#nodeGradient1)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" begin="0.9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.9s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Connections Layer 1 to Layer 2 -->
  <g id="connections1" opacity="0.3">
    <line x1="100" y1="80" x2="300" y2="70" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="80" x2="300" y2="140" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.2s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="80" x2="300" y2="210" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.4s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="80" x2="300" y2="280" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.6s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="80" x2="300" y2="350" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.8s" repeatCount="indefinite"/>
    </line>
    
    <line x1="100" y1="160" x2="300" y2="70" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.3s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="160" x2="300" y2="140" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.5s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="160" x2="300" y2="210" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.7s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="160" x2="300" y2="280" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.9s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="160" x2="300" y2="350" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.1s" repeatCount="indefinite"/>
    </line>
    
    <line x1="100" y1="240" x2="300" y2="70" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.6s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="240" x2="300" y2="140" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.8s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="240" x2="300" y2="210" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.0s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="240" x2="300" y2="280" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.2s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="240" x2="300" y2="350" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.4s" repeatCount="indefinite"/>
    </line>
    
    <line x1="100" y1="320" x2="300" y2="70" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.9s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="320" x2="300" y2="140" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.1s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="320" x2="300" y2="210" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.3s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="320" x2="300" y2="280" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.5s" repeatCount="indefinite"/>
    </line>
    <line x1="100" y1="320" x2="300" y2="350" stroke="#667eea" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.7s" repeatCount="indefinite"/>
    </line>
  </g>
  
  <!-- Layer 2 (Hidden) - 5 nodes -->
  <g id="layer2">
    <circle cx="300" cy="70" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.5s" repeatCount="indefinite"/>
    </circle>
    <circle cx="300" cy="140" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.5s" begin="0.4s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.5s" begin="0.4s" repeatCount="indefinite"/>
    </circle>
    <circle cx="300" cy="210" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.5s" begin="0.8s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.5s" begin="0.8s" repeatCount="indefinite"/>
    </circle>
    <circle cx="300" cy="280" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.5s" begin="1.2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.5s" begin="1.2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="300" cy="350" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.5s" begin="1.6s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.5s" begin="1.6s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Connections Layer 2 to Layer 3 -->
  <g id="connections2" opacity="0.3">
    <line x1="300" y1="70" x2="500" y2="90" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.5s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="70" x2="500" y2="170" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.7s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="70" x2="500" y2="250" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.9s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="70" x2="500" y2="330" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.1s" repeatCount="indefinite"/>
    </line>
    
    <line x1="300" y1="140" x2="500" y2="90" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="0.8s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="140" x2="500" y2="170" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.0s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="140" x2="500" y2="250" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.2s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="140" x2="500" y2="330" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.4s" repeatCount="indefinite"/>
    </line>
    
    <line x1="300" y1="210" x2="500" y2="90" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.1s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="210" x2="500" y2="170" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.3s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="210" x2="500" y2="250" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.5s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="210" x2="500" y2="330" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.7s" repeatCount="indefinite"/>
    </line>
    
    <line x1="300" y1="280" x2="500" y2="90" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.4s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="280" x2="500" y2="170" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.6s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="280" x2="500" y2="250" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.8s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="280" x2="500" y2="330" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.0s" repeatCount="indefinite"/>
    </line>
    
    <line x1="300" y1="350" x2="500" y2="90" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.7s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="350" x2="500" y2="170" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.9s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="350" x2="500" y2="250" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.1s" repeatCount="indefinite"/>
    </line>
    <line x1="300" y1="350" x2="500" y2="330" stroke="#f093fb" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.3s" repeatCount="indefinite"/>
    </line>
  </g>
  
  <!-- Layer 3 (Hidden) - 4 nodes -->
  <g id="layer3">
    <circle cx="500" cy="90" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="500" cy="170" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.2s" begin="0.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.2s" begin="0.5s" repeatCount="indefinite"/>
    </circle>
    <circle cx="500" cy="250" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.2s" begin="1.0s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.2s" begin="1.0s" repeatCount="indefinite"/>
    </circle>
    <circle cx="500" cy="330" r="12" fill="url(#nodeGradient2)" filter="url(#glow)">
      <animate attributeName="r" values="12;15;12" dur="2.2s" begin="1.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2.2s" begin="1.5s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Connections Layer 3 to Layer 4 -->
  <g id="connections3" opacity="0.3">
    <line x1="500" y1="90" x2="700" y2="140" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.0s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="90" x2="700" y2="220" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.2s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="90" x2="700" y2="300" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.4s" repeatCount="indefinite"/>
    </line>
    
    <line x1="500" y1="170" x2="700" y2="140" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.3s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="170" x2="700" y2="220" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.5s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="170" x2="700" y2="300" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.7s" repeatCount="indefinite"/>
    </line>
    
    <line x1="500" y1="250" x2="700" y2="140" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.6s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="250" x2="700" y2="220" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.8s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="250" x2="700" y2="300" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.0s" repeatCount="indefinite"/>
    </line>
    
    <line x1="500" y1="330" x2="700" y2="140" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="1.9s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="330" x2="700" y2="220" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.1s" repeatCount="indefinite"/>
    </line>
    <line x1="500" y1="330" x2="700" y2="300" stroke="#4facfe" class="connection" stroke-width="1">
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" begin="2.3s" repeatCount="indefinite"/>
    </line>
  </g>
  
  <!-- Layer 4 (Output) - 3 nodes -->
  <g id="layer4">
    <circle cx="700" cy="140" r="12" fill="url(#nodeGradient3)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="700" cy="220" r="12" fill="url(#nodeGradient3)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" begin="0.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.5s" repeatCount="indefinite"/>
    </circle>
    <circle cx="700" cy="300" r="12" fill="url(#nodeGradient3)" filter="url(#glow)">
      <animate attributeName="r" values="12;14;12" dur="2s" begin="1.0s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="1.0s" repeatCount="indefinite"/>
    </circle>
  </g>
  
  <!-- Animated particles flowing through network -->
  <circle r="3" class="particle" opacity="0.9">
    <animateMotion dur="4s" repeatCount="indefinite">
      <mpath href="#path1"/>
    </animateMotion>
    <animate attributeName="opacity" values="0;0.9;0.9;0" dur="4s" repeatCount="indefinite"/>
  </circle>
  <path id="path1" d="M 100,80 L 300,140 L 500,170 L 700,220" fill="none"/>
  
  <circle r="3" class="particle" opacity="0.9">
    <animateMotion dur="4s" begin="1s" repeatCount="indefinite">
      <mpath href="#path2"/>
    </animateMotion>
    <animate attributeName="opacity" values="0;0.9;0.9;0" dur="4s" begin="1s" repeatCount="indefinite"/>
  </circle>
  <path id="path2" d="M 100,240 L 300,210 L 500,250 L 700,300" fill="none"/>
  
  <circle r="3" class="particle" opacity="0.9">
    <animateMotion dur="4s" begin="2s" repeatCount="indefinite">
      <mpath href="#path3"/>
    </animateMotion>
    <animate attributeName="opacity" values="0;0.9;0.9;0" dur="4s" begin="2s" repeatCount="indefinite"/>
  </circle>
  <path id="path3" d="M 100,160 L 300,280 L 500,330 L 700,140" fill="none"/>
</svg>